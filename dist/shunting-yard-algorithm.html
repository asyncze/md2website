<html lang='en'><head><link rel='icon' href='fav.png'><title>Shunting Yard Algorithm</title><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><meta name='author' content='Michael Sjöberg'><meta name='description' content='My projects, posts, and programming notes.'><meta name='theme-color' content='#161716'><meta name='application-name' content='Michael Sjöberg'><meta name='apple-mobile-web-app-title' content='Michael Sjöberg'><meta name='apple-mobile-web-app-capable' content='yes'><meta name='mobile-web-app-capable' content='yes'><meta name='apple-mobile-web-app-status-bar-style' content='#161716'><link rel='stylesheet' href='main.min.css'><script src='main.min.js'></script></head><body><nav><p><a href="index.html">home</a> <a href="journal.html">journal</a> <a href="projects.html">projects</a> <a href="posts.html">posts</a> <a href="programming.html">programming</a></p></nav><div class='page'><h1>Shunting Yard Algorithm</h1>
<p><em>July 2022</em> <a href="programming.html#python">Python</a> <a href="programming.html#python-compilers">Compilers</a></p>
<p>Shunting Yard Algorithm is a method for parsing mathematical expressions specified in infix notation.</p>
<pre><code class="language-python"># https://en.wikipedia.org/wiki/Shunting-yard_algorithm

PRECEDENCE = { 'func': 3, '^': 2, '/': 1, '*': 1, '+': 0, '-': 0 }

def parse(input_):
    operator = []
    output = []
    tokens = list(input_)
    while len(tokens) &gt; 0:
        char = tokens[0]
        # number
        if char.isnumeric():
            output.append(char)
        # function
        if char.isalpha():
            function = [char]
            i = 1
            while tokens[i].isalpha():
                function.append(tokens[i])
                i += 1
            operator.append(('func', ''.join(function)))
            # advance
            tokens = tokens[i - 1:]
        # operator
        if char in ['+', '-', '*', '/', '^']:
            # precedence
            while len(operator) &gt; 0:
                op = operator.pop()
                if op[0] == 'func':
                    output.append(op[1])
                elif op not in ['(', '^'] and (op in PRECEDENCE and PRECEDENCE[op] &gt;= PRECEDENCE[char]):
                    output.append(op)
                else:
                    # break
                    operator.append(op)
                    break
            operator.append(char)
        # left parenthesis
        if char == '(':
            operator.append(char)
        # right parenthesis
        if char == ')':
            if '(' not in operator: print(&quot;Error: Mismatched parentheses&quot;)
            while len(operator) &gt; 0:
                op = operator.pop()
                if op[0] == 'func':
                    output.append(op[1])
                elif op != '(':
                    output.append(op)
                else:
                    break
        tokens = tokens[1:]
    # pop operators
    while len(operator) &gt; 0:
        op = operator.pop()
        if op[0] == 'func':
            output.append(op[1])
        else:
            output.append(op)

    return ' '.join(output)
</code></pre>
<pre><code class="language-python">assert parse(&quot;3 + 4 * 2 / (1 - 5) ^2 ^3&quot;) == &quot;3 4 2 * 1 5 - 2 3 ^ ^ / +&quot;
assert parse(&quot;sin(max(2, 3) / 3 * pi)&quot;) == &quot;2 3 max 3 / pi * sin&quot;
</code></pre></div><div id='footer'><p>[<a id='invert'>light|dark</a>] [<a href='https://github.com/mixmaester/html_builder'>source</a>]</p><p class='small'>DOM loaded in <span id='dom_time'></span>, page loaded in <span id='load_time'></span>. <a href='https://github.com/mixmaester/md2html'>Built with md2html</a></p></div><script>hljs.highlightAll();</script></body></html>